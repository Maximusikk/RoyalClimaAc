esphome:
  name: kandey
  friendly_name: Konditioner
  includes:
    - "tcl_climate.h"  # Подключение файла библиотеки

esp32:
  board: esp32-c3-devkitm-1
  framework:
    type: arduino

logger:
  level: VERBOSE
# Enable Home Assistant API
api:
  encryption:
    key: ""

ota:
  - platform: esphome
    password: ""

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: "Kandey Fallback Hotspot"
    password: ""

external_components:
  - source:
      type: git
      url: https://github.com/robertklep/esphome-custom-component
    components: [ custom, custom_component ]

uart:
  id: uart_bus
  tx_pin: 1
  rx_pin: 3
  baud_rate: 9600
  parity: EVEN

climate:
  - platform: custom
    lambda: |-
      auto my_custom_climate = new MyCustomClimate(id(uart_bus));
      App.register_component(my_custom_climate);
      return {my_custom_climate};

    climates:
      - name: "TCL a/c"
        id: my_custom_climate

select:
  - platform: template
    name: Vertical swing
    id: vswing
    entity_category: config
    options:
      - "Last position"
      - "Fix top"
      - "Fix upper"
      - "Fix mid"
      - "Fix lower"
      - "Fix bottom"
      - "Move full"
      - "Move upper"
      - "Move lower"
    set_action:
      then:
        lambda: |-
          static_cast<MyCustomClimate*>(id(my_custom_climate))->control_vertical_swing(x);

  - platform: template
    name: Horizontal swing
    id: hswing
    entity_category: config
    options:
      - "Last position"
      - "Fix left"
      - "Fix mid left"
      - "Fix mid"
      - "Fix mid right"
      - "Fix right"
      - "Move full"
      - "Move left"
      - "Move mid"
      - "Move right"
    set_action:
      then:
        lambda: |-
          static_cast<MyCustomClimate*>(id(my_custom_climate))->control_horizontal_swing(x);
